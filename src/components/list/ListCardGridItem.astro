---
import { PokeCardHandler } from "../../handlers/PokeCardHandler";
import { PokeCardMini } from "../../models/PokeCardMini";
import type { UserListCard } from "../../models/UserListCard";
import ListCardActions from "./ListCardActions.astro";

interface Props {
  listCard: UserListCard | null;
  listType: string;
}

const { listCard, listType } = Astro.props;

const { card, error } = await PokeCardHandler.get({
  cardId: listCard?.cardId,
  language: listCard?.lang || "en",
});

// console.log("LIST CARD", listCard);
// console.log("CARD", card);
---

<div class="card cardEffect">
  <a href={`/card/${card?.id}`}>
    <div>
      <img
        src={card && card.image.low != null
          ? card.image.low
          : "/img/card-not-found.jpg"}
        alt={card ? card?.name : "Card not found"}
        title={card ? card?.name : "Card not found"}
        loading="lazy"
        transition:name={`${card?.id}-image`}
      />

      <span class="capitalize">
        {listType == "pokedex" ? listCard?.dexId : listCard?.cardId} -
        {listCard?.pokemonName}
      </span>
    </div>
  </a>
</div>

<style>
  .card {
    position: relative;
  }
</style>
