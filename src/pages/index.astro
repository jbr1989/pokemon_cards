---
import Layout from "../layouts/Layout.astro";
import SetSelector from "../components/SetSelector.astro";
import CardGrid from "../components/card/CardGrid.astro";

import PopularSets from "../components/set/PopularSets.astro";
import FeaturedCards from "../components/FeaturedCards.astro";

// Fetch all sets
const language = "es";

// Get the selected set from URL params or use the latest set

const selectedSetId = Astro.url.searchParams.get("set") || "base1";
// console.log(selectedSetId);
---

<Layout title="Pokémon TCG Card Browser">
  <section class="w-full py-4 sm:py-6 md:py-8">
    <div class="px-4 sm:px-8 mx-auto text-center">
      <!-- Header with Logo -->
      <div class="space-y-2">
        <img
          src="/img/pwa-192x192.png"
          class="mx-auto"
          alt="PokéCards"
          width="192"
          height="192"
        />

        <h1 class="text-white text-2xl sm:text-3xl font-bold">PokéCards</h1>
      </div>
    </div>
    <div class="mx-auto px-4 w-full max-w-md py-6">
      <div class="w-full relative">
        <div class="max-w-md mx-auto">
          <form class="relative" action="/search" method="get">
            <!-- Search Icon -->
            <div
              class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
            >
              <svg
                class="size-4 text-gray-400"
                fill="none"
                height="24"
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                viewBox="0 0 24 24"
                width="24"
              >
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" x2="16.65" y1="21" y2="16.65"></line>
              </svg>
            </div>

            <!-- Input Field -->
            <input
              type="search"
              name="name"
              id="global-search"
              class="block w-full py-2 ps-10 pr-24 text-sm text-gray-100 rounded-lg bg-[#2C2C2C] focus:ring-yellow-300 focus:border-yellow-300 transition duration-200"
              placeholder="Find a card..."
              required=""
            />

            <!-- Search Button -->
            <button
              type="button"
              class="absolute end-1.5 top-1/2 -translate-y-1/2 font-medium rounded-md text-black text-xs px-3 py-1 transition duration-200 bg-yellowish bg-yellow-400 hover:bg-yellow-500 focus:ring-2 focus:ring-yellow-500"
            >
              Search
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>

  {/* Popular Sets Section */}
  <section class="py-12 md:py-16 bg-zinc-800">
    <div class="container px-4 md:px-6">
      <div class="flex flex-col items-start gap-4">
        <h2 class="text-2xl font-bold text-white">Popular Sets</h2>
        <p class="text-zinc-400">Browse the most popular Pokémon card sets.</p>
        <PopularSets />
      </div>
    </div>
  </section>

  {/* Featured Cards Section */}
  <section class="py-12 md:py-16 bg-zinc-900/50">
    <div class="container px-4 md:px-6">
      <div class="flex flex-col items-start gap-4">
        <h2 class="text-2xl font-bold text-white">Your Cards</h2>
        <p class="text-zinc-400">Check out these trending Pokémon cards.</p>
        <FeaturedCards />
      </div>
    </div>
  </section>
</Layout>
